@page "/FlightVisualizer"
@using GuiWebApp.Client.Services;
@inject MapService map
<PageTitle>Flight Visualizer</PageTitle>
<h3>FlightVisualizer</h3>

<p>Input the latitude and longitude for a point below:</p>
<div class="form-group mb-2">
    <input class="form-control ml-2 mr-2" placeholder="latitude" @bind="Latitude" />
    <input class="form-control ml-2 mr-2" placeholder="longitude" @bind="Longitude" />
</div>
<button class="btn btn-primary mb-2" @onclick="addMarker"> Add point</button>
<button class="btn btn-primary mb-2" @onclick="createTestPath"> Create LA Test Path</button>
<p>Input the Flight-ID:</p>
<div class="form-group mb-2">
    <input class="form-control ml-2 mr-2" placeholder="Flight ID" @bind="FlightId" />
</div>
<button class="btn btn-primary mb-2" @onclick="createTestPath"> Create Path for Flight ID</button>


<div id="map" style="width:1000px; height:1000px">
   
</div>

@code {
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if(firstRender){
            await map.CreateMap(55.676098, 12.568337, 10); // Starting Latitude, Longitude and Zoom for the map. This is set to Copenhagen.
            await map.AddPoint(52.5200, 13.4050);
        }
    }

    public double Latitude { get; set; }
    public double Longitude { get; set; }
    public double FlightId { get; set; }

    private async Task addMarker()
    {
        await map.AddPoint(Latitude, Longitude);
    }

    private async Task createTestPath()
    {
        var coords = new List<List<double>>()
        {
                   new (){45.51, -122.68},
                   new (){37.77, -122.43},
                   new (){34.04, -118.2}
        };
        await map.CreatePath(coords, "red");
    }

    private async Task createFlightPath()
    {
        await map.CreatePath(, "blue");
    }

}
